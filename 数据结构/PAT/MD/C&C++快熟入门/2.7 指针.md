---
title: "C/C++快速入门 指针"
date: 2018-01-25T20:46:52+08:00  
tags: [PAT]  
categories: [PAT]  
---

# 指针

## 什么是指针

-  指针就是变量的地址 (不严谨)
-  指针是一个unsigned类型的整数

## 指针变量

-  指针变量是用来存放指针的(也可以理解程地址)
- 在数据类型后面加 `*` 表示这是一个指针变量.或者在变量前加 `*` ,都是可以的 

- 给指针变量赋值
    - 把变量的地址取出来,然后赋给对应类型的指针变量. `&` 是取址运算符
    - **注意** : 地址 `&a`是赋值给`p`而不是`*p`的.因为允许 * 放在变量前面,`p`才是变量,容易混淆.  只要知道星号是类型的一部分就可以. 
    ```c++
    int a;
    int *p = &a;
    ```
- 现在指针变量 `p` 存放了`a`的地址.如何通过`p` 获取变量`a`呢?  把 `*` 视作 开启房间的钥匙,放在 `p` 前面,就可以获取变量a的值
    ```c++
    #include<cstdio>
    int main(){
        int a;
        int *p  = &a;
        a = 233;
        printf("%d\n",*p);
        return 0;
    }

    输出结果: 
    233
    ```
- 对 `*p` 直接赋值,地址没有改变,改变了房间内的元素,`a` 也改变
    ```c++
    #include<cstdio>
    int main(){
        int a;
        int *p  = &a;
        *p = 233;
        printf("%d,%d\n",*p,a);
        return 0;
    }

    输出结果: 
    233,233
    ```
- `p + 1` 是指p所指的int型变量的下一个int型变量地址,下一个是跨越了一整个int(4Byte).  指针变量支持自增自减 `p++,p--`
- 对指针变量来说,其存储的地址的类型称为基类型. `int *p;` int是基类型,指针变量`p`不能存放`double,char`类型数据的地址.

## 指针与数组

- `&a[0]`  首地址 
- 数组名称也作为数组的首地址使用 `*p = a` 则指针变量 `p`的地址是 `&a[0]`
-  指针变量可以进行加减法,可以退出数组`a+i` 等同于 `&a[i]` 
-  需要注意: `a+i`只是地址,访问需要加上`*`,变成`*(a+i)`才可以和`a[i]`等价. 所以有一种新颖的输入输出数组写法
-  ```c++
    #include<cstdio>
    int main(){
        int a[10];
        for(int i = 0;i<10;i++){
    	    scanf("%d",a+i);
	    }
	    for(int i = 0;i<10;i++){
		    printf("%d ",*(a+i));
	    }
	    return 0;
    }
    ```
- 另外指针变量支持自增自减,这样可以枚举数组中的元素:
    ```c++
    #include<cstdio>
    int main(){
        int a[10] = {1,2,3,4,5,6,7,8,9,10};
        for(int *p = a;p<a+10;p++){
    	    printf("%d ",*p);
	    }
	    return 0;
    }
    ```
- 两个int型的指针相减,等价于在求两个指针之间相差几个int

## 使用指针变量作为函数参数

- 把变量的地址传入函数,如果在函数中对这个地址中的元素进行改变,原先的数据就会确实被改变. 这种传递方式被称为 : 地址传递
- 经典例子 交换函数 `swap(int a, int b)` 不行,因为是单向一次性的值传递,只是参数一个副本,对这个副本的操作不会改变main函数中`a,b`的值. 只有在获取地址的情况下对元素进行操作,才能真正的修改变量.

```c++
#include<cstdio>
void swap(int *a,int *b){
	int temp = *a;
	*a = *b;
	*b = temp; 
}
int main(){
    int a = 1, b = 2;
    int *p1 = &a, *p2 = &b;
    swap(p1,p2);
    printf("a = %d , b = %d\n", *p1, *p2);
    printf("a = %d , b = %d\n", a, b);
    return 0;
}
```

## 引用 

### 引用的含义

- 引用是c++中一个强有力的语法. 
- 不使用指针,达到修改传入参数的目的,使用引用,不会产生副本,而是给原变量起了个**别名**,相当于旧名字和新名字都是同一个人,且**对引用变量的操作就是对原变量的操作**
- 引用的使用方法,只要在函数的参数类型后面加上`&`就可以,加在`int`后或变量前都可以.示例:
```c++
#include<cstdio>
void change(int &x){
	x = 1;
}
int main(){
	int x = 10;
	change(x);
	printf("%d\n",x);
	return 0;
}
输出结果:
1
```
> 当然函数的参数名和实际传入参数名可以不同
> 要把引用的`&`和取址运算符`&`区别开来

### 指针的引用
- 由于引用是产生变量的别名,因此常量不可使用引用,不可以写`swap(&a,&b)`必须要用指针变量p1,p2存放&a,&b,然后把指针变量作为参数传入
```c++
#include<cstdio>
void swap(int* &p1,int* &p2){
	int* temp = p1;
	p1 = p2;
	p2 = temp;
}
int main(){
	int a = 1, b = 2;
	int *p1 = &a, *p2 = &b;
	swap(p1,p2);
	printf("a = %d,b = %d\n",*p1, *p2);
	return 0;
} 
```









